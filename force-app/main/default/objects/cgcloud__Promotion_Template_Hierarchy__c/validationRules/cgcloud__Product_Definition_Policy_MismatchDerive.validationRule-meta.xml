<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>cgcloud__Product_Definition_Policy_MismatchDerive</fullName>
    <active>true</active>
    <description>The Parent and the Child Promotion Template with Usage as Derive must have the same Product Definition Policy.</description>
    <errorConditionFormula>AND(
			ISPICKVAL(cgcloud__Usage__c,&quot;Derive&quot;),
			OR(
			AND(
			INCLUDES( cgcloud__Parent_Promotion_Template__r.cgcloud__Product_Definition_Policy__c , &quot;Static&quot;),
			NOT(INCLUDES( cgcloud__Child_Promotion_Template__r.cgcloud__Product_Definition_Policy__c ,&quot;Static&quot;)
			)
			),
			AND(
			INCLUDES( cgcloud__Parent_Promotion_Template__r.cgcloud__Product_Definition_Policy__c , &quot;Dynamic&quot;),
			NOT(INCLUDES( cgcloud__Child_Promotion_Template__r.cgcloud__Product_Definition_Policy__c ,&quot;Dynamic&quot;)
			))
			)
		)</errorConditionFormula>
    <errorMessage>The Parent and the Child Promotion Template with Usage as Derive must have the same Product Definition Policy.</errorMessage>
</ValidationRule>
